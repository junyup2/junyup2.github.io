---
title: "[Programmers] Stacks (Apply)"
categories:
  - Data Structure
tags:
  - programmers
  - algorithm
  - data structure
  - stacks
toc: true
toc_sticky: true
toc_label: "ìŠ¤íƒì˜ ì‘ìš©"
toc_icon: "stacks"
---

ğŸ“Œ **ìë£Œêµ¬ì¡°** & **ì•Œê³ ë¦¬ì¦˜**<br>
{: .notice--primary}

# 12, 13 ê°• : ìŠ¤íƒì˜ ì‘ìš© - ìˆ˜ì‹ì˜ í›„ìœ„ í‘œê¸°
---

## ìˆ˜ì‹ì˜ í‘œê¸°ë²•
- ìš°ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” í‘œê¸°ë²•ì€ **ì¤‘ìœ„ í‘œê¸°ë²•(infix notation)**
  - ì—°ì‚°ìê°€ í”¼ì—°ì‚°ìë“¤ **ì‚¬ì´**ì— ìœ„ì¹˜
- **í›„ìœ„ í‘œê¸°ë²•(postfix notation)**
  - ì—°ì‚°ìê°€ í”¼ì—°ì‚°ìë“¤ì˜ **ë’¤**ì— ìœ„ì¹˜

### ì¤‘ìœ„ í‘œí˜„ì‹ -> í›„ìœ„ í‘œí˜„ì‹
```python
A * B + C -> A B * C +
A + B * C -> A B C * +
```

- í”¼ì—°ì‚°ìë¥¼ ì ìŒ
- ì²˜ìŒë§Œë‚œ ì—°ì‚°ìë¥¼ ìŠ¤íƒì— ë„£ìŒ
- í”¼ì—°ì‚°ìë¥¼ ì ìŒ
- ë‹¤ìŒ ì—°ì‚°ìë¥¼ ë§Œë‚˜ë©´ **ìŠ¤íƒ ì•ˆì˜ ì—°ì‚°ìì™€ <u>ìš°ì„ ìˆœìœ„</u>ë¥¼ ë¹„êµ**
  - ìš°ì„ ìˆœìœ„ê°€ **ìŠ¤íƒ ë‚´ë¶€(ìŠ¤íƒ ìµœìƒë‹¨)ê°€ ë†’ì„ ê²½ìš°**
    - **ìŠ¤íƒ ë‚´ë¶€ì˜ ì—°ì‚°ìë¥¼ êº¼ë‚´ì–´ ì ìŒ -> ìŠ¤íƒì— ì´ë²ˆ ì—°ì‚°ìë¥¼ ì¶”ê°€**
  - ìš°ì„ ìˆœìœ„ê°€ **ìŠ¤íƒ ë‚´ë¶€ê°€ ë‚®ì„ ê²½ìš°**
    - **ìŠ¤íƒì— ì´ë²ˆ ì—°ì‚°ìë¥¼ ì¶”ê°€**
  - ìš°ì„ ìˆœìœ„ê°€ **ì„œë¡œ ê°™ì„ ê²½ìš°**
    - **ìŠ¤íƒ ë‚´ë¶€ì˜ ì—°ì‚°ìë¥¼ ë¨¼ì € ì ìŒ**

### ìŠ¤íƒì˜ ìš°ì„ ìˆœìœ„ ë¹„êµ (ê´„í˜¸ì˜ ì²˜ë¦¬)
- ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ê²ƒì„ ìŠ¤íƒì—ì„œ êº¼ë‚´ì„œ ì ì–´ì•¼í•¨
- ë™ì¼í•˜ë‹¤ë©´ ë¨¼ì € ë“¤ì–´ì˜¨, ìŠ¤íƒì˜ ì—°ì‚°ìë¥¼ ë¨¼ì € ì²˜ë¦¬
- **ê´„í˜¸**ê°€ ìˆë‹¤ë©´ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì¥ ë†’ê²Œ ì²˜ë¦¬
  - ì—¬ëŠ” ê´„í˜¸ëŠ” ìŠ¤íƒì— push
  - ë‹«ëŠ” ê´„í˜¸ë¥¼ ë§Œë‚˜ë©´ ì—¬ëŠ” ê´„í˜¸ê°€ ë‚˜ì˜¬ ë•Œ ê¹Œì§€ pop
  - ë‹¨, ì—°ì‚°ìë¥¼ ë§Œë‚¬ì„ë•Œ ì—¬ëŠ” ê´„í˜¸ ë„ˆë¨¸ê¹Œì§€ POPí•˜ì§€ ì•Šë„ë¡ **ì—¬ëŠ” ê´„í˜¸ì˜ ìš°ì„ ìˆœìœ„ëŠ” ê°€ì¥ ë‚®ê²Œ ì„¤ì •**í•´ ì£¼ì–´ì•¼ í•¨

### ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„

- ì—°ì‚°ìì˜ ìš°ì„ ìˆœìœ„ ì„¤ì •
```python
prec = {
    '*': 3, '/': 3,
    '+': 2, '-': 2,
    '(': 1
}
```

- ì¤‘ìœ„ í‘œí˜„ì‹ì„ ì™¼ìª½ë¶€í„° í•œ ê¸€ìì”© ì½ì–´ì„œ
  - í”¼ì—°ì‚°ìì´ë©´ ê·¸ëƒ¥ ì¶œë ¥
  - '(' ì´ë©´ ìŠ¤íƒì— push
  - ')' ì´ë©´ '('ì´ ë‚˜ì˜¬ ë•Œê¹Œì§€ ìŠ¤íƒì—ì„œ pop, ì¶œë ¥
  - ì—°ì‚°ìì´ë©´ ìŠ¤íƒì—ì„œ ì´ë³´ë‹¤ ë†’(ê±°ë‚˜ ê°™)ì€ ìš°ì„ ìˆœìœ„ì˜ ê²ƒë“¤ì„ pop, ì¶œë ¥
  - ê·¸ë¦¬ê³  ì´ ì—°ì‚°ìëŠ” ìŠ¤íƒì— push
  - (ëë‚˜ë©´)ìŠ¤íƒì— ë‚¨ì•„ìˆëŠ” ì—°ì‚°ìëŠ” ëª¨ë‘ pop, ì¶œë ¥


- ìŠ¤íƒ ë§¨ ìœ„ì— ìˆëŠ” ì—°ì‚°ìì™€ì˜ ìš°ì„ ìˆœìœ„ ë¹„êµ
  - ìŠ¤íƒì˜ peek() ì—°ì‚°ì„ ì´ìš©


- ìŠ¤íƒì— ë‚¨ì•„ìˆëŠ” ì—°ì‚°ì ëª¨ë‘ popí•˜ëŠ” ìˆœí™˜ë¬¸
  - while not opStack.isEmpty():

```ì¤‘ìœ„ í‘œí˜„ì‹ -> í›„ìœ„ í‘œí˜„ì‹```
```python
class ArrayStack:

    def __init__(self):
        self.data = []

    def size(self):
        return len(self.data)

    def isEmpty(self):
        return self.size() == 0

    def push(self, item):
        self.data.append(item)

    def pop(self):
        return self.data.pop()

    def peek(self):
        return self.data[-1]

prec = {
    '*': 3, '/': 3,
    '+': 2, '-': 2,
    '(': 1
}

def solution(S):
    opStack = ArrayStack()
    answer = ''
    for i in S:
        if i.isalpha():
            answer += i
        else:
            if i == "(":
                opStack.push(i)
            elif i == ")":
                item = None
                while not opStack.isEmpty():
                    item = opStack.pop()
                    if item == "(":
                        break
                    else:
                        answer += item
            else:
                if not opStack.isEmpty():
                    item = opStack.peek()
                    if prec[item] >= prec[i]:

                        while not opStack.isEmpty():
                            item = opStack.pop()
                            answer += item
                        opStack.push(i)
                    else:
                        opStack.push(i)
                else:
                    opStack.push(i)
    while not opStack.isEmpty():
        item = opStack.pop()
        answer += item

    return answer
```
#### í›„ìœ„ í‘œê¸° ìˆ˜ì‹ ê³„ì‚°

- ìˆ˜ì‹ì„ ì™¼ìª½ë¶€í„° ì‹œì‘í•´ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì°¨ë¡€ëŒ€ë¡œ ì½ì–´ ë“œë¦¬ë©´ì„œ
  - **í”¼ì—°ì‚°ìì´ë©´ ìŠ¤íƒì—ì„œ popâ‚, popâ‚‚ í•˜ì—¬ popâ‚‚ ì—°ì‚° popâ‚ì„ ê³„ì‚°, ì´ ê²°ê³¼ë¥¼ ìŠ¤íƒì— push(ìˆœì„œ ì¤‘ìš”)**
  - ìˆ˜ì‹ì˜ ëì— ë„ë‹¬í•˜ë©´ ìŠ¤íƒì—ì„œ pop
    - ì´ê²ƒì´ ìµœì¢… ê³„ì‚°(ìµœì¢… ì—°ì‚°) ê²°ê³¼
- splitTokens() : í”¼ì—°ì‚°ìì™€ ì—°ì‚°ìë¥¼ ë‚˜ëˆ„ì–´ ì£¼ëŠ” í•¨ìˆ˜
- infixToPostfix() : í›„ìœ„ í‘œê¸°ë²•ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ë¡œ ë¦¬í„´
- postfixEval() : í›„ìœ„ í‘œê¸°ë²•ìœ¼ë¡œëœ ì—°ì‚°ì„ ì²˜ë¦¬
- eval() - í•¨ìˆ˜ì— ë¬¸ìì—´ì„ ì¸ìë¡œ ì „ë‹¬í•˜ë©´, ê·¸ ë¬¸ìì—´ì„ ê·¸ëŒ€ë¡œ Python í‘œí˜„ì‹ìœ¼ë¡œ ê°„ì£¼í•˜ê³  ê³„ì‚°í•œ ê²°ê³¼ë¥¼ ë¦¬í„´í•˜ëŠ” built-in í•¨ìˆ˜

```í›„ìœ„ í‘œí˜„ì‹ ê³„ì‚°```
```python
class ArrayStack:

    def __init__(self):
        self.data = []

    def size(self):
        return len(self.data)

    def isEmpty(self):
        return self.size() == 0

    def push(self, item):
        self.data.append(item)

    def pop(self):
        return self.data.pop()

    def peek(self):
        return self.data[-1]


def splitTokens(exprStr):
    tokens = []
    val = 0
    valProcessing = False
    for c in exprStr:
        if c == ' ':
            continue
        if c in '0123456789':
            val = val * 10 + int(c)
            valProcessing = True
        else:
            if valProcessing:
                tokens.append(val)
                val = 0
            valProcessing = False
            tokens.append(c)
    if valProcessing:
        tokens.append(val)

    return tokens


def infixToPostfix(tokenList):
    prec = {
        '*': 3,
        '/': 3,
        '+': 2,
        '-': 2,
        '(': 1,
    }

    opStack = ArrayStack()
    postfixList = []
    operator = [")","(","+","-","*","/"]
    for i in tokenList:
        if str(i) not in operator:
            postfixList.append(i)
        else:
            if i == "(":
                opStack.push(i)
            elif i == ")":
                item = None
                while not opStack.isEmpty():
                    item = opStack.pop()
                    if item == "(":
                        break
                    else:
                        postfixList.append(item)
            else:
                if not opStack.isEmpty():
                    item = opStack.peek()
                    #ìš°ì„ ìˆœìœ„ íŒë‹¨
                    if prec[item] >= prec[i]:
                        #ì˜ˆì™¸ì²˜ë¦¬
                        while not opStack.isEmpty():
                            item = opStack.pop()
                            postfixList.append(item)
                        opStack.push(i)
                    else:
                        opStack.push(i)
                else:
                    opStack.push(i)

    while not opStack.isEmpty():
        item = opStack.pop()
        postfixList.append(item)

    return postfixList


def postfixEval(tokenList):
    opStack = ArrayStack()
    operator = [")","(","+","-","*","/"]
    for i in tokenList:
        if str(i) not in operator:
            opStack.push(i)
        else:
            pop_1 = opStack.pop()
            pop_2 = opStack.pop()
            if i == "+":
                opStack.push(pop_2 + pop_1)
            elif i == "-":
                opStack.push(pop_2 - pop_1)
            elif i == "*":
                opStack.push(pop_2 * pop_1)
            else:
                opStack.push(pop_2 / pop_1)

    result = opStack.pop()
    return result


def solution(expr):
    tokens = splitTokens(expr)
    postfix = infixToPostfix(tokens)
    val = postfixEval(postfix)
    return val
```

---


ğŸ”” **í¬ìŠ¤íŒ… ê³µì§€** <br><br>
ë³¸ í¬ìŠ¤íŒ…ì€ **ìë£Œêµ¬ì¡° & ì•Œê³ ë¦¬ì¦˜**ê³¼ ê´€ë ¨ëœ ë‚´ìš©ìœ¼ë¡œ,<br>
í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ì˜ ã€Œ ì–´ì„œì™€! ìë£Œêµ¬ì¡°ì™€ ì•Œê³ ë¦¬ì¦˜ì€ ì²˜ìŒì´ì§€? ã€ ê°•ì˜ë¥¼ ìˆ˜ê°•í•˜ê³  ì‘ì„±<br>
ì¶œì²˜ - [ì–´ì„œì™€! ìë£Œêµ¬ì¡°ì™€ ì•Œê³ ë¦¬ì¦˜ì€ ì²˜ìŒì´ì§€? | í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ (programmers.co.kr)](https://programmers.co.kr/learn/courses/57)<br>
{: .notice--success}